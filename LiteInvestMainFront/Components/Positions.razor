@using LiteInvestMainFront.Data
@using LiteInvestServer.Entity

<DxGrid 

@ref="gridPositions"
CssClass="dxgrid"
Data="@OpenedPositions"
ShowAllRows="true"
ColumnResizeMode="GridColumnResizeMode.NextColumn"
TextWrapEnabled="false"
ShowGroupPanel="false"
HighlightRowOnHover="true"
FocusedRowEnabled="true">

    <Columns>
        <DxGridDataColumn FieldName="secName" Width="auto"  />
        <DxGridDataColumn FieldName="MaxOpened" Width="auto"  />
        <DxGridDataColumn FieldName="Side" Width="auto" />
        <DxGridDataColumn FieldName="AverageEntry" Width="auto" />
        <DxGridDataColumn FieldName="UnRealizedPnlPoints" Width="auto" />
    </Columns>

</DxGrid> 

@code {

    DxGrid gridPositions;
    List<Pos> OpenedPositions { get; set; }

    [Parameter]
    public ApiDataService apiDataService{ get; set; }

    protected override Task OnInitializedAsync()
    {
        LoadPoses();
        return base.OnInitializedAsync();
    }

    public async void LoadPoses()
    {
        var positions = await apiDataService.GetPositions();
        if(positions!=null)
        {
            OpenedPositions = positions;
        }
        InvokeAsync(StateHasChanged);
    }

}
